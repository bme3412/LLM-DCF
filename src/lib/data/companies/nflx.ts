import { CompanyModel, YearProjection } from "@/types";
import { transcriptInsights as nflxTranscriptInsights } from "@/lib/data/transcripts/nflx-transcript-data";

const projections: YearProjection[] = [
  {
    year: 2026,
    segmentRevenue: {
      ucan: 20.0,
      emea: 15.3,
      latam: 5.6,
      apac: 5.5,
      advertising: 2.2,
      experiences: 1.0,
    },
    totalRevenue: 49.6,
    fcfMargin: 0.255,
    fcf: 12.6,
    discountFactor: 0.919,
    presentValue: 11.6,
  },
  {
    year: 2027,
    segmentRevenue: {
      ucan: 21.1,
      emea: 16.3,
      latam: 5.9,
      apac: 5.9,
      advertising: 2.6,
      experiences: 1.5,
    },
    totalRevenue: 53.3,
    fcfMargin: 0.26,
    fcf: 13.9,
    discountFactor: 0.845,
    presentValue: 11.7,
  },
  {
    year: 2028,
    segmentRevenue: {
      ucan: 22.2,
      emea: 17.4,
      latam: 6.3,
      apac: 6.3,
      advertising: 3.0,
      experiences: 1.9,
    },
    totalRevenue: 57.1,
    fcfMargin: 0.262,
    fcf: 15.0,
    discountFactor: 0.778,
    presentValue: 11.7,
  },
  {
    year: 2029,
    segmentRevenue: {
      ucan: 23.4,
      emea: 18.6,
      latam: 6.7,
      apac: 6.7,
      advertising: 3.4,
      experiences: 2.2,
    },
    totalRevenue: 61.0,
    fcfMargin: 0.265,
    fcf: 16.2,
    discountFactor: 0.716,
    presentValue: 11.6,
  },
  {
    year: 2030,
    segmentRevenue: {
      ucan: 24.7,
      emea: 19.8,
      latam: 7.1,
      apac: 7.1,
      advertising: 3.8,
      experiences: 2.5,
    },
    totalRevenue: 65.0,
    fcfMargin: 0.268,
    fcf: 17.4,
    discountFactor: 0.659,
    presentValue: 11.5,
  },
  {
    year: 2031,
    segmentRevenue: {
      ucan: 26.0,
      emea: 21.1,
      latam: 7.5,
      apac: 7.5,
      advertising: 4.2,
      experiences: 2.9,
    },
    totalRevenue: 69.2,
    fcfMargin: 0.27,
    fcf: 18.7,
    discountFactor: 0.607,
    presentValue: 11.3,
  },
  {
    year: 2032,
    segmentRevenue: {
      ucan: 27.4,
      emea: 22.5,
      latam: 8.0,
      apac: 8.0,
      advertising: 4.6,
      experiences: 3.1,
    },
    totalRevenue: 73.6,
    fcfMargin: 0.272,
    fcf: 20.0,
    discountFactor: 0.559,
    presentValue: 11.2,
  },
  {
    year: 2033,
    segmentRevenue: {
      ucan: 28.8,
      emea: 24.0,
      latam: 8.5,
      apac: 8.5,
      advertising: 5.1,
      experiences: 3.3,
    },
    totalRevenue: 78.2,
    fcfMargin: 0.274,
    fcf: 21.4,
    discountFactor: 0.515,
    presentValue: 11.0,
  },
  {
    year: 2034,
    segmentRevenue: {
      ucan: 30.3,
      emea: 25.6,
      latam: 9.0,
      apac: 9.0,
      advertising: 5.6,
      experiences: 3.5,
    },
    totalRevenue: 83.0,
    fcfMargin: 0.276,
    fcf: 22.9,
    discountFactor: 0.475,
    presentValue: 10.9,
  },
  {
    year: 2035,
    segmentRevenue: {
      ucan: 31.9,
      emea: 27.2,
      latam: 9.5,
      apac: 9.5,
      advertising: 6.1,
      experiences: 3.9,
    },
    totalRevenue: 88.1,
    fcfMargin: 0.278,
    fcf: 24.5,
    discountFactor: 0.438,
    presentValue: 10.7,
  },
];

export const nflxCompany: CompanyModel = {
  symbol: "NFLX",
  name: "Netflix, Inc.",
  description:
    "Global streaming leader coming off a 17% YoY revenue quarter with record US/UK view share, its best ad-sales haul ever, and breakout live events like Canelo vs Crawford plus K-pop Demon Hunters.",
  segments: [
    {
      id: "ucan",
      name: "UCAN",
      fy2025Revenue: 18.8,
      fy2024Revenue: 16.1,
      growthRate: 0.17,
      operatingMargin: 0.41,
      percentOfTotal: 42,
      components: [
        { name: "Subscription", revenue: 16.2, growthRate: 0.12 },
        { name: "Ad-supported", revenue: 2.6, growthRate: 0.35 },
      ],
      growthDrivers: [
        "Record US view share (8.6%) with Stranger Things + Happy Gilmore 2 slate",
        "Paid sharing controls sustaining ARPU and churn gains",
      ],
      challenges: [
        "High household penetration and bundle competition",
        "Brazilian tax accrual reminded of regulatory surprises",
      ],
      color: "#E50914",
    },
    {
      id: "emea",
      name: "EMEA",
      fy2025Revenue: 13.9,
      fy2024Revenue: 11.8,
      growthRate: 0.18,
      operatingMargin: 0.32,
      percentOfTotal: 31,
      components: [
        { name: "Subscription", revenue: 12.2, growthRate: 0.15 },
        { name: "Ad-supported", revenue: 1.7, growthRate: 0.4 },
      ],
      growthDrivers: [
        "Local breakout hits (Bon Appétit, Your Majesty; The Thursday Murder Club)",
        "Price optimization paired with widening ad inventory",
      ],
      challenges: [
        "FX volatility and EU content quotas",
        "Macro sensitivity in key markets",
      ],
      color: "#B81D24",
    },
    {
      id: "latam",
      name: "LATAM",
      fy2025Revenue: 5.2,
      fy2024Revenue: 4.7,
      growthRate: 0.1,
      operatingMargin: 0.29,
      percentOfTotal: 11,
      components: [
        { name: "Subscription", revenue: 4.4, growthRate: 0.09 },
        { name: "Bundles", revenue: 0.8, growthRate: 0.2 },
      ],
      growthDrivers: [
        "Telco bundles covering ~60% of new members",
        "Password sharing crackdown improving churn",
      ],
      challenges: [
        "Brazil gross tax dispute hit Q3 margin by ~500 bps",
        "Currency controls impacting cash repatriation",
      ],
      color: "#221F1F",
    },
    {
      id: "apac",
      name: "APAC",
      fy2025Revenue: 5.0,
      fy2024Revenue: 4.1,
      growthRate: 0.21,
      operatingMargin: 0.27,
      percentOfTotal: 11,
      components: [
        { name: "Mobile-only", revenue: 2.1, growthRate: 0.25 },
        { name: "Standard plans", revenue: 2.9, growthRate: 0.18 },
      ],
      growthDrivers: [
        "Mobile-only plans + anime/K-drama driving 20% engagement lift",
        "Local originals like Alice in Borderland and UNTAMED",
      ],
      challenges: [
        "ARPU gap vs mature markets",
        "Regional competition from local streamers",
      ],
      color: "#F47521",
    },
    {
      id: "advertising",
      name: "Advertising",
      fy2025Revenue: 1.5,
      fy2024Revenue: 1.0,
      growthRate: 0.5,
      operatingMargin: 0.36,
      percentOfTotal: 3,
      components: [
        { name: "AVOD", revenue: 1.2, growthRate: 0.48 },
        { name: "Brand partnerships", revenue: 0.3, growthRate: 0.6 },
      ],
      growthDrivers: [
        "Best ad quarter ever with US upfront commitments doubling",
        "Programmatic ramp and Netflix Ad Suite unlock richer targeting",
      ],
      challenges: [
        "CTV competition for budgets",
        "Need to scale measurement in Europe/APAC",
      ],
      color: "#F5C518",
    },
    {
      id: "experiences",
      name: "Live, Sports & Gaming",
      fy2025Revenue: 1.0,
      fy2024Revenue: 0.6,
      growthRate: 0.45,
      operatingMargin: 0.18,
      percentOfTotal: 2,
      components: [
        { name: "Live events", revenue: 0.6, growthRate: 0.5 },
        { name: "Gaming & merchandising", revenue: 0.4, growthRate: 0.4 },
      ],
      growthDrivers: [
        "Canelo vs Crawford became the most-viewed men’s title fight this century",
        "NFL Christmas slate, Jake Paul vs Tank Davis, and experiential stores",
      ],
      challenges: [
        "Still small profit pool vs core streaming",
        "Execution risk on global live rights",
      ],
      color: "#8C52FF",
    },
  ],
  baseCaseDCF: {
    projections,
    wacc: 0.088,
    terminalGrowth: 0.027,
    terminalValue: 405,
    pvTerminalValue: 189,
    enterpriseValue: 297,
    cash: 9.3,
    debt: 14.5,
    equityValue: 291.8,
    sharesOutstanding: 0.434,
    fairValuePerShare: 673,
  },
  marketData: {
    currentPrice: 620,
    marketCap: 269,
    sharesOutstanding: 0.434,
    dateUpdated: "2025-10-21",
  },
  recommendation: {
    rating: "BUY",
    targetPrice: 680,
    upside: 0.1,
    suggestedEntry: [560, 620],
    catalysts: {
      positive: [
        "Record ad sales + doubled upfront commitments flow through FY26",
        "Live content slate (NFL Christmas, Jake Paul vs Tank) deepens engagement",
        "Brazil tax charge largely behind them with margin guidance reiterated",
      ],
      negative: [
        "FX and macro pressure in EMEA/LATAM",
        "Execution on live rights and gaming remains nascent",
        "Potential regulatory/tax surprises in key regions",
      ],
    },
  },
  scenarios: {
    bull: {
      fairValue: 750,
      metrics: [
        { label: "Ad revenue", value: "$8.5B" },
        { label: "FCF margin", value: "28%" },
        { label: "Live/gaming revenue", value: "$2.5B" },
        { label: "Terminal growth", value: "3.0%" },
      ],
      narrative:
        "Ad tier scaling plus live experiences drive double-digit ARPU growth while margins expand toward 30%.",
    },
    base: {
      fairValue: 673,
      metrics: [
        { label: "Ad revenue", value: "$7B" },
        { label: "FCF margin", value: "26%" },
        { label: "Global paid adds", value: "18M" },
        { label: "Terminal growth", value: "2.7%" },
      ],
      narrative:
        "Balanced member growth and disciplined content spend sustain high-20s margins with incremental ad/experience upside.",
    },
    bear: {
      fairValue: 520,
      metrics: [
        { label: "Ad revenue", value: "$5B" },
        { label: "FCF margin", value: "22%" },
        { label: "Global paid adds", value: "12M" },
        { label: "Terminal growth", value: "2.3%" },
      ],
      narrative:
        "Macro + competition slow regional adds and delay ad-tech monetization, keeping margins in the low-20s.",
    },
  },
  transcriptInsights: nflxTranscriptInsights,
  theme: {
    iconLetter: "N",
    primaryColor: "#E50914",
    accentColor: "#221F1F",
    segmentColors: {
      ucan: "#E50914",
      emea: "#B81D24",
      latam: "#221F1F",
      apac: "#F47521",
      advertising: "#F5C518",
      experiences: "#8C52FF",
    },
  },
};

