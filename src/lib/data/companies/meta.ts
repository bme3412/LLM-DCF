import { CompanyModel, YearProjection } from "@/types";
import { transcriptInsights as metaTranscriptInsights } from "@/lib/data/transcripts/meta-transcript-data";

const projections: YearProjection[] = [
  {
    year: 2026,
    segmentRevenue: {
      "family-ads": 178,
      messaging: 7.5,
      commerce: 4.2,
      "reality-labs": 3,
      infrastructure: 2.3,
    },
    totalRevenue: 195,
    fcfMargin: 0.325,
    fcf: 63.4,
    discountFactor: 0.918,
    presentValue: 58.2,
  },
  {
    year: 2027,
    segmentRevenue: {
      "family-ads": 187,
      messaging: 8.3,
      commerce: 4.5,
      "reality-labs": 3.2,
      infrastructure: 2.5,
    },
    totalRevenue: 205.5,
    fcfMargin: 0.328,
    fcf: 67.4,
    discountFactor: 0.84,
    presentValue: 56.6,
  },
  {
    year: 2028,
    segmentRevenue: {
      "family-ads": 197,
      messaging: 9.1,
      commerce: 4.9,
      "reality-labs": 3.4,
      infrastructure: 2.7,
    },
    totalRevenue: 217.1,
    fcfMargin: 0.331,
    fcf: 71.9,
    discountFactor: 0.768,
    presentValue: 55.2,
  },
  {
    year: 2029,
    segmentRevenue: {
      "family-ads": 208,
      messaging: 9.9,
      commerce: 5.3,
      "reality-labs": 3.6,
      infrastructure: 2.9,
    },
    totalRevenue: 229.7,
    fcfMargin: 0.334,
    fcf: 76.7,
    discountFactor: 0.702,
    presentValue: 53.9,
  },
  {
    year: 2030,
    segmentRevenue: {
      "family-ads": 219,
      messaging: 10.7,
      commerce: 5.6,
      "reality-labs": 3.9,
      infrastructure: 3.1,
    },
    totalRevenue: 242.3,
    fcfMargin: 0.337,
    fcf: 81.7,
    discountFactor: 0.642,
    presentValue: 52.4,
  },
  {
    year: 2031,
    segmentRevenue: {
      "family-ads": 231,
      messaging: 11.6,
      commerce: 6,
      "reality-labs": 4.1,
      infrastructure: 3.3,
    },
    totalRevenue: 256,
    fcfMargin: 0.34,
    fcf: 87,
    discountFactor: 0.59,
    presentValue: 51.3,
  },
  {
    year: 2032,
    segmentRevenue: {
      "family-ads": 244,
      messaging: 12.4,
      commerce: 6.4,
      "reality-labs": 4.4,
      infrastructure: 3.5,
    },
    totalRevenue: 271,
    fcfMargin: 0.342,
    fcf: 92.7,
    discountFactor: 0.542,
    presentValue: 50.2,
  },
  {
    year: 2033,
    segmentRevenue: {
      "family-ads": 257,
      messaging: 13.3,
      commerce: 6.8,
      "reality-labs": 4.7,
      infrastructure: 3.8,
    },
    totalRevenue: 285.6,
    fcfMargin: 0.345,
    fcf: 98.7,
    discountFactor: 0.501,
    presentValue: 49.4,
  },
  {
    year: 2034,
    segmentRevenue: {
      "family-ads": 271,
      messaging: 14,
      commerce: 7.2,
      "reality-labs": 5,
      infrastructure: 4.1,
    },
    totalRevenue: 301.3,
    fcfMargin: 0.347,
    fcf: 104.6,
    discountFactor: 0.463,
    presentValue: 48.5,
  },
  {
    year: 2035,
    segmentRevenue: {
      "family-ads": 286,
      messaging: 14.9,
      commerce: 7.6,
      "reality-labs": 5.3,
      infrastructure: 4.3,
    },
    totalRevenue: 318.1,
    fcfMargin: 0.35,
    fcf: 111.3,
    discountFactor: 0.428,
    presentValue: 47.6,
  },
];

export const metaCompany: CompanyModel = {
  symbol: "META",
  name: "Meta Platforms, Inc.",
  description:
    "Family of Apps posted a $51.2B Q3 FY25 quarter (+26% YoY) with 3.54B daily actives, 14% more ad impressions, and accelerating AI investments through Meta Superintelligence Labs and AI glasses.",
  segments: [
    {
      id: "family-ads",
      name: "Family of Apps Advertising",
      fy2025Revenue: 187,
      fy2024Revenue: 168,
      growthRate: 0.12,
      operatingMargin: 0.47,
      percentOfTotal: 91,
      components: [
        { name: "Feed & Stories ads", revenue: 120, growthRate: 0.12 },
        { name: "Reels ad run-rate", revenue: 50, growthRate: 0.18 },
        { name: "Advantage+ automation", revenue: 10, growthRate: 0.15 },
        { name: "Brand partnerships", revenue: 7, growthRate: 0.1 },
      ],
      growthDrivers: [
        "Ad impressions +14% YoY with 10% higher pricing",
        "Reels monetization closing gap but settling into high-teens run-rate",
        "Runtime ranking lift + Andromeda +14% ad quality improves ROAS",
      ],
      challenges: [
        "Less Personalized Ads remedies in the EU",
        "Traffic acquisition costs and ATT drag",
        "Macro ad demand sensitivity",
      ],
      color: "#0866FF",
    },
    {
      id: "messaging",
      name: "Messaging & WhatsApp Business",
      fy2025Revenue: 12,
      fy2024Revenue: 9.6,
      growthRate: 0.25,
      operatingMargin: 0.3,
      percentOfTotal: 6,
      components: [
        { name: "Click-to-WhatsApp ads", revenue: 7, growthRate: 0.32 },
        { name: "Paid messaging/API", revenue: 5, growthRate: 0.28 },
      ],
      growthDrivers: [
        "Click-to-WhatsApp ads revenue +60% YoY, moderating to low-30s as the base scales",
        "1B+ daily active threads between people and businesses",
        "Business AI rollout in Mexico & Philippines to automate sales",
      ],
      challenges: [
        "Need to monetize conversations without hurting UX",
        "Regional privacy and payments compliance",
      ],
      color: "#25D366",
    },
    {
      id: "commerce",
      name: "Commerce & Subscriptions",
      fy2025Revenue: 2.8,
      fy2024Revenue: 2.1,
      growthRate: 0.3,
      operatingMargin: 0.26,
      percentOfTotal: 1,
      components: [
        { name: "Meta Verified & subs", revenue: 1.6, growthRate: 0.32 },
        { name: "Shops & checkout", revenue: 1.2, growthRate: 0.28 },
      ],
      growthDrivers: [
        "Family of Apps other revenue +59% YoY to $690M in Q3",
        "Creator monetization + Meta Verified adoption",
        "Integrated checkout and commerce tooling",
      ],
      challenges: [
        "Proof of incremental ROI for merchants",
        "Competition from native storefronts",
      ],
      color: "#FF6D00",
    },
    {
      id: "reality-labs",
      name: "Reality Labs",
      fy2025Revenue: 1.9,
      fy2024Revenue: 1.4,
      growthRate: 0.35,
      operatingMargin: -3.5,
      percentOfTotal: 1,
      components: [
        { name: "Quest hardware", revenue: 1.2, growthRate: 0.2 },
        { name: "Ray-Ban / AI glasses", revenue: 0.7, growthRate: 0.45 },
      ],
      growthDrivers: [
        "Quest channel fill plus Quest 3S comparisons",
        "Ray-Ban Meta glasses sold out in most stores within 48 hours",
        "Vibes AI content creation + Meta Neural Band interfaces",
      ],
      challenges: [
        "Reality Labs operating loss of $4.4B in Q3",
        "Supply chain and hardware margin pressure",
      ],
      color: "#8E24AA",
    },
    {
      id: "infrastructure",
      name: "AI Infrastructure & Other",
      fy2025Revenue: 1.8,
      fy2024Revenue: 1.3,
      growthRate: 0.28,
      operatingMargin: 0.16,
      percentOfTotal: 1,
      components: [
        { name: "AI compute & cloud offsets", revenue: 1, growthRate: 0.32 },
        { name: "Other services", revenue: 0.8, growthRate: 0.24 },
      ],
      growthDrivers: [
        "Q3 CapEx $19.4B; FY25 guide raised to $70-72B",
        "Meta Superintelligence Labs demand for TPUs/GPU clusters",
        "Optionality from third-party cloud partnerships",
      ],
      challenges: [
        "One Big Beautiful Bill Act tax impacts and AMT valuation allowance",
        "Need to balance on/off balance sheet financing",
      ],
      color: "#00B8D9",
    },
  ],
  baseCaseDCF: {
    projections,
    wacc: 0.089,
    terminalGrowth: 0.029,
    terminalValue: 2250,
    pvTerminalValue: 995,
    enterpriseValue: 1490,
    cash: 44.5,
    debt: 28.8,
    equityValue: 1506,
    sharesOutstanding: 2.57,
    fairValuePerShare: 586,
  },
  marketData: {
    currentPrice: 515,
    marketCap: 1324,
    sharesOutstanding: 2.57,
    dateUpdated: "2025-10-29",
  },
  recommendation: {
    rating: "BUY",
    targetPrice: 610,
    upside: 0.18,
    suggestedEntry: [480, 540],
    catalysts: {
      positive: [
        "Q3 FY25 ad revenue +26% YoY with higher pricing and impressions",
        "Click-to-WhatsApp and business messaging scaling +60% YoY but moderating to 30%+",
        "AI glasses demand plus AI infrastructure capacity unlocks",
      ],
      negative: [
        "EU Less Personalized Ads mandate could hurt European revenue",
        "2026 CapEx acceleration pressuring FCF near term",
        "One-time AMT tax charge highlights policy risk",
      ],
    },
  },
  scenarios: {
    bull: {
      fairValue: 650,
      metrics: [
        { label: "Ad revenue CAGR", value: "11%" },
        { label: "Messaging ARR", value: "$15B" },
        { label: "Reality Labs op loss", value: "-$6B" },
        { label: "Terminal growth", value: "3.5%" },
      ],
      narrative:
        "AI-native ad formats, Advantage+ automation, and monetized business messaging expand revenue while Reality Labs losses narrow faster than expected.",
    },
    base: {
      fairValue: 586,
      metrics: [
        { label: "Ad revenue CAGR", value: "8%" },
        { label: "FCF margin", value: "33%" },
        { label: "CapEx", value: "$70-72B FY25" },
        { label: "Terminal growth", value: "3.2%" },
      ],
      narrative:
        "Steady engagement gains and disciplined CapEx pacing keep FCF growing even as AI infrastructure absorbs cash.",
    },
    bear: {
      fairValue: 450,
      metrics: [
        { label: "Ad revenue CAGR", value: "5%" },
        { label: "Reality Labs loss", value: "-$10B" },
        { label: "CapEx", value: "$80B+ FY26" },
        { label: "Terminal growth", value: "2.5%" },
      ],
      narrative:
        "Regulatory remedies plus heavier infrastructure spending compress margins and delay monetization of new surfaces.",
    },
  },
  transcriptInsights: metaTranscriptInsights,
  theme: {
    iconLetter: "M",
    primaryColor: "#0866FF",
    accentColor: "#25D366",
    segmentColors: {
      "family-ads": "#0866FF",
      messaging: "#25D366",
      commerce: "#FF6D00",
      "reality-labs": "#8E24AA",
      infrastructure: "#00B8D9",
    },
  },
};

