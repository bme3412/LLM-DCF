import { CompanyModel, YearProjection } from "@/types";
import { transcriptInsights as amznTranscriptInsights } from "@/lib/data/transcripts/amzn-transcript-data";

const projections: YearProjection[] = [
  {
    year: 2026,
    segmentRevenue: {
      aws: 138,
      "north-america": 230,
      international: 130,
      advertising: 70,
      subscription: 46,
    },
    totalRevenue: 614,
    fcfMargin: 0.11,
    fcf: 67.5,
    discountFactor: 0.921,
    presentValue: 62.2,
  },
  {
    year: 2027,
    segmentRevenue: {
      aws: 157,
      "north-america": 246,
      international: 140,
      advertising: 80,
      subscription: 50,
    },
    totalRevenue: 673,
    fcfMargin: 0.115,
    fcf: 77.4,
    discountFactor: 0.85,
    presentValue: 65.8,
  },
  {
    year: 2028,
    segmentRevenue: {
      aws: 178,
      "north-america": 264,
      international: 151,
      advertising: 90,
      subscription: 54,
    },
    totalRevenue: 737,
    fcfMargin: 0.12,
    fcf: 88.4,
    discountFactor: 0.784,
    presentValue: 69.3,
  },
  {
    year: 2029,
    segmentRevenue: {
      aws: 200,
      "north-america": 284,
      international: 163,
      advertising: 102,
      subscription: 59,
    },
    totalRevenue: 808,
    fcfMargin: 0.125,
    fcf: 101,
    discountFactor: 0.723,
    presentValue: 73.1,
  },
  {
    year: 2030,
    segmentRevenue: {
      aws: 222,
      "north-america": 305,
      international: 176,
      advertising: 115,
      subscription: 64,
    },
    totalRevenue: 882,
    fcfMargin: 0.13,
    fcf: 114.7,
    discountFactor: 0.667,
    presentValue: 76.5,
  },
  {
    year: 2031,
    segmentRevenue: {
      aws: 244,
      "north-america": 327,
      international: 190,
      advertising: 129,
      subscription: 69,
    },
    totalRevenue: 959,
    fcfMargin: 0.135,
    fcf: 129.5,
    discountFactor: 0.615,
    presentValue: 79.6,
  },
  {
    year: 2032,
    segmentRevenue: {
      aws: 268,
      "north-america": 351,
      international: 205,
      advertising: 144,
      subscription: 75,
    },
    totalRevenue: 1_043,
    fcfMargin: 0.138,
    fcf: 143.9,
    discountFactor: 0.567,
    presentValue: 81.6,
  },
  {
    year: 2033,
    segmentRevenue: {
      aws: 292,
      "north-america": 377,
      international: 221,
      advertising: 160,
      subscription: 81,
    },
    totalRevenue: 1_131,
    fcfMargin: 0.14,
    fcf: 158.3,
    discountFactor: 0.523,
    presentValue: 82.8,
  },
  {
    year: 2034,
    segmentRevenue: {
      aws: 317,
      "north-america": 404,
      international: 238,
      advertising: 177,
      subscription: 87,
    },
    totalRevenue: 1_223,
    fcfMargin: 0.142,
    fcf: 173.8,
    discountFactor: 0.483,
    presentValue: 83.9,
  },
  {
    year: 2035,
    segmentRevenue: {
      aws: 343,
      "north-america": 433,
      international: 257,
      advertising: 195,
      subscription: 94,
    },
    totalRevenue: 1_322,
    fcfMargin: 0.145,
    fcf: 191.7,
    discountFactor: 0.445,
    presentValue: 85.3,
  },
];

export const amznCompany: CompanyModel = {
  symbol: "AMZN",
  name: "Amazon.com, Inc.",
  description:
    "Scaled commerce, AI infrastructure, and retail media flywheels delivering $180B in Q3 FY25 revenue with AWS re-accelerating 20% YoY and Ads +22%.",
  segments: [
    {
      id: "aws",
      name: "Amazon Web Services",
      fy2025Revenue: 128,
      fy2024Revenue: 108,
      growthRate: 0.19,
      operatingMargin: 0.32,
      percentOfTotal: 31,
      components: [{ name: "AWS FY25 revenue baseline", revenue: 128, growthRate: 0.19 }],
      growthDrivers: [
        "Q3 FY25 AWS revenue $33.0B (+20% YoY), fastest pace since 2022",
        "Backlog ~$200B with Trainium2 clusters (Project Rainier) and Bedrock agent workloads",
        "Added 3.8 GW power capacity in past 12 months; doubling again by 2027 to meet GenAI demand",
        "AgentCore, Quick Suite, Transform unlock enterprise AI/agent adoption",
      ],
      challenges: [
        "Azure/GCP pricing pressure",
        "Capex intensity (guidance ~$125B cash CapEx 2025)",
        "Customer optimization cycles",
      ],
      color: "#F97316",
    },
    {
      id: "north-america",
      name: "North America Retail",
      fy2025Revenue: 214,
      fy2024Revenue: 194,
      growthRate: 0.1,
      operatingMargin: 0.08,
      percentOfTotal: 39,
      components: [{ name: "North America FY25 revenue baseline", revenue: 214, growthRate: 0.1 }],
      growthDrivers: [
        "Q3 FY25 NA sales $106.3B (+11% YoY) despite $2.5B FTC settlement",
        "Regionalized fulfillment network delivers record Prime speeds and 60% more rural coverage",
        "Same-day perishable grocery in 1,000+ cities, targeting 2,300+ by year end",
        "Rufus AI assistant (250M users) and Help Me Decide boost conversion in core retail",
      ],
      challenges: [
        "Wage inflation",
        "Macro consumer spend",
        "Logistics capacity balancing",
      ],
      color: "#2563EB",
    },
    {
      id: "international",
      name: "International Retail",
      fy2025Revenue: 122,
      fy2024Revenue: 110,
      growthRate: 0.11,
      operatingMargin: 0.04,
      percentOfTotal: 22,
      components: [{ name: "International FY25 revenue baseline", revenue: 122, growthRate: 0.11 }],
      growthDrivers: [
        "Q3 FY25 International revenue $40.9B (+14% YoY, +10% ex-FX)",
        "Flipkart ad business ~$2B run-rate, PhonePe TPV >$1T supporting commerce ecosystem",
        "Marketplace sellers expanded to 450K; automation trimmed supply-chain cost/unit 8%",
      ],
      challenges: [
        "FX volatility",
        "Regulatory constraints",
        "Last-mile cost structure",
      ],
      color: "#10B981",
    },
    {
      id: "advertising",
      name: "Advertising",
      fy2025Revenue: 60,
      fy2024Revenue: 50,
      growthRate: 0.18,
      operatingMargin: 0.4,
      percentOfTotal: 11,
      components: [{ name: "Advertising FY25 revenue baseline", revenue: 60, growthRate: 0.18 }],
      growthDrivers: [
        "Amazon Ads delivered $17.7B revenue in Q3 FY25 (+22% YoY) with third consecutive acceleration",
        "DSP partnerships (Netflix, Spotify, SiriusXM) expand premium supply",
        "Prime Video Live Sports (TNF, NBA) and AI Creative Studio drive top-of-funnel demand",
      ],
      challenges: [
        "Privacy regulation",
        "Competition from Walmart/Target media",
      ],
      color: "#A855F7",
    },
    {
      id: "subscription",
      name: "Subscription Services",
      fy2025Revenue: 40,
      fy2024Revenue: 36,
      growthRate: 0.1,
      operatingMargin: 0.25,
      percentOfTotal: 7,
      components: [{ name: "Subscription FY25 revenue baseline", revenue: 40, growthRate: 0.1 }],
      growthDrivers: [
        "Prime value reinforced via live sports (TNF, NBA on Prime), Luna upgrades, and Alexa+ devices",
        "Same-day grocery add-to-delivery usage (80M+) and Rufus AI deepen engagement",
        "Help Me Decide + Buy with Prime features increase stickiness across memberships",
      ],
      challenges: [
        "Churn in mature markets",
        "Content cost inflation",
      ],
      color: "#FACC15",
    },
  ],
  baseCaseDCF: {
    projections,
    wacc: 0.085,
    terminalGrowth: 0.03,
    terminalValue: 4030,
    pvTerminalValue: 1650,
    enterpriseValue: 2380,
    cash: 120,
    debt: 110,
    equityValue: 2390,
    sharesOutstanding: 10.3,
    fairValuePerShare: 232,
  },
  marketData: {
    currentPrice: 185,
    marketCap: 1900,
    sharesOutstanding: 10.3,
    dateUpdated: "2025-10-30",
  },
  recommendation: {
    rating: "BUY",
    targetPrice: 240,
    upside: 0.3,
    suggestedEntry: [165, 185],
    catalysts: {
      positive: [
        "AWS revenue re-accelerates to $33B (+20% YoY) as Trainium/Bedrock scale",
        "Advertising flywheel ($17.7B, +22% YoY) with DSP + Prime Video partnerships",
        "Same-day grocery + rural expansion drive North America mix shift",
        "International breakeven ahead of plan",
      ],
      negative: [
        "Macro hits discretionary demand",
        "Hyperscaler pricing war + heavy AI capex ($125B 2025)",
        "Regulatory limits on marketplace practices",
      ],
    },
  },
  scenarios: {
    bull: {
      fairValue: 285,
      metrics: [
        { label: "AWS CAGR", value: "18%" },
        { label: "Retail EBIT margin", value: "9%" },
        { label: "Ad revenue", value: "$85B" },
        { label: "Terminal growth", value: "3.3%" },
      ],
      narrative: "AI-driven AWS reacceleration and operating leverage in North America boost earnings power.",
    },
    base: {
      fairValue: 232,
      metrics: [
        { label: "AWS CAGR", value: "15%" },
        { label: "Retail EBIT margin", value: "7%" },
        { label: "Ad revenue", value: "$70B" },
        { label: "Terminal growth", value: "3.0%" },
      ],
      narrative: "Balanced AWS growth with steady retail efficiencies sustain mid-teens FCF expansion.",
    },
    bear: {
      fairValue: 180,
      metrics: [
        { label: "AWS CAGR", value: "11%" },
        { label: "Retail EBIT margin", value: "4%" },
        { label: "Ad revenue", value: "$60B" },
        { label: "Terminal growth", value: "2.6%" },
      ],
      narrative: "Macro softness and competitive pricing compress AWS and retail profitability.",
    },
  },
  transcriptInsights: amznTranscriptInsights,
  theme: {
    iconLetter: "Z",
    primaryColor: "#FF9900",
    accentColor: "#111827",
    segmentColors: {
      aws: "#F97316",
      "north-america": "#2563EB",
      international: "#10B981",
      advertising: "#A855F7",
      subscription: "#FACC15",
    },
  },
};
