import { CompanyModel, YearProjection } from "@/types";
import { transcriptInsights as nvdaTranscriptInsights } from "@/lib/data/transcripts/nvda-transcript-data";

const projections: YearProjection[] = [
  {
    year: 2026,
    segmentRevenue: {
      "data-center": 184,
      gaming: 15,
      "pro-viz": 6,
      automotive: 4,
      "oem-other": 2,
    },
    totalRevenue: 211,
    fcfMargin: 0.35,
    fcf: 73.9,
    discountFactor: 0.909,
    presentValue: 67.2,
  },
  {
    year: 2027,
    segmentRevenue: {
      "data-center": 206,
      gaming: 16,
      "pro-viz": 6.5,
      automotive: 4.5,
      "oem-other": 2.2,
    },
    totalRevenue: 235.2,
    fcfMargin: 0.355,
    fcf: 83.5,
    discountFactor: 0.834,
    presentValue: 69.6,
  },
  {
    year: 2028,
    segmentRevenue: {
      "data-center": 231,
      gaming: 17,
      "pro-viz": 7.1,
      automotive: 5.1,
      "oem-other": 2.3,
    },
    totalRevenue: 262.5,
    fcfMargin: 0.36,
    fcf: 94.5,
    discountFactor: 0.765,
    presentValue: 72.2,
  },
  {
    year: 2029,
    segmentRevenue: {
      "data-center": 259,
      gaming: 18,
      "pro-viz": 7.7,
      automotive: 5.7,
      "oem-other": 2.5,
    },
    totalRevenue: 293.9,
    fcfMargin: 0.365,
    fcf: 107.1,
    discountFactor: 0.702,
    presentValue: 75.1,
  },
  {
    year: 2030,
    segmentRevenue: {
      "data-center": 290,
      gaming: 19.5,
      "pro-viz": 8.4,
      automotive: 6.4,
      "oem-other": 2.6,
    },
    totalRevenue: 326.9,
    fcfMargin: 0.37,
    fcf: 120.9,
    discountFactor: 0.644,
    presentValue: 77.9,
  },
  {
    year: 2031,
    segmentRevenue: {
      "data-center": 324,
      gaming: 21,
      "pro-viz": 9.1,
      automotive: 7.1,
      "oem-other": 2.8,
    },
    totalRevenue: 364,
    fcfMargin: 0.375,
    fcf: 136.5,
    discountFactor: 0.59,
    presentValue: 80.5,
  },
  {
    year: 2032,
    segmentRevenue: {
      "data-center": 360,
      gaming: 22.6,
      "pro-viz": 9.8,
      automotive: 7.9,
      "oem-other": 3.0,
    },
    totalRevenue: 403.3,
    fcfMargin: 0.377,
    fcf: 152.0,
    discountFactor: 0.54,
    presentValue: 82.1,
  },
  {
    year: 2033,
    segmentRevenue: {
      "data-center": 399,
      gaming: 24.3,
      "pro-viz": 10.6,
      automotive: 8.7,
      "oem-other": 3.1,
    },
    totalRevenue: 445.7,
    fcfMargin: 0.38,
    fcf: 169.4,
    discountFactor: 0.494,
    presentValue: 83.7,
  },
  {
    year: 2034,
    segmentRevenue: {
      "data-center": 439,
      gaming: 26.0,
      "pro-viz": 11.4,
      automotive: 9.6,
      "oem-other": 3.3,
    },
    totalRevenue: 489.3,
    fcfMargin: 0.382,
    fcf: 187.1,
    discountFactor: 0.451,
    presentValue: 84.5,
  },
  {
    year: 2035,
    segmentRevenue: {
      "data-center": 483,
      gaming: 27.8,
      "pro-viz": 12.3,
      automotive: 10.6,
      "oem-other": 3.4,
    },
    totalRevenue: 537.1,
    fcfMargin: 0.385,
    fcf: 206.8,
    discountFactor: 0.412,
    presentValue: 85.2,
  },
];

export const nvdaCompany: CompanyModel = {
  symbol: "NVDA",
  name: "NVIDIA Corporation",
  description:
    "Accelerated computing and AI infrastructure leader that just posted $57B Q3 FY26 revenue (+62% YoY) with $51B from data center and a guided $65B Q4.",
  segments: [
    {
      id: "data-center",
      name: "Data Center",
      fy2025Revenue: 205,
      fy2024Revenue: 123,
      growthRate: 0.22,
      operatingMargin: 0.55,
      percentOfTotal: 88,
      components: [
        { name: "Compute platforms (FY26 run-rate)", revenue: 172, growthRate: 0.23 },
        { name: "Networking (FY26 run-rate)", revenue: 32.8, growthRate: 0.28 },
      ],
      growthDrivers: [
        "Q3 FY26 Data Center revenue $51.2B (+66% YoY) with GB300 shipments ramping",
        "Partnerships with OpenAI, Anthropic, xAI and sovereign builds covering â‰¥10GW",
        "Spectrum-X / NVLink networking revenue $8.2B (+162% YoY) enabling AI factories",
      ],
      challenges: [
        "Export controls limiting China shipments",
        "Customer ASIC ambitions",
        "Gigawatt-scale power constraints",
      ],
      color: "#16A34A",
    },
    {
      id: "gaming",
      name: "Gaming",
      fy2025Revenue: 17.2,
      fy2024Revenue: 13.2,
      growthRate: 0.12,
      operatingMargin: 0.42,
      percentOfTotal: 7,
      components: [
        { name: "Gaming revenue (FY26 run-rate)", revenue: 17.2, growthRate: 0.12 },
      ],
      growthDrivers: [
        "Q3 FY26 gaming revenue $4.3B (+30% YoY) on DLSS 4 launches like Borderlands 4 and Battlefield 6",
        "RTX AI PC blueprints supporting 25th anniversary GeForce campaigns",
      ],
      challenges: [
        "Consumer macro swings",
        "Console/PC competition",
      ],
      color: "#2563EB",
    },
    {
      id: "pro-viz",
      name: "Professional Visualization",
      fy2025Revenue: 3.0,
      fy2024Revenue: 1.9,
      growthRate: 0.18,
      operatingMargin: 0.32,
      percentOfTotal: 3,
      components: [
        { name: "Pro Viz revenue (FY26 run-rate)", revenue: 3.0, growthRate: 0.18 },
      ],
      growthDrivers: [
        "Omniverse DSX blueprint for gigawatt AI factories plus DGX Spark shipments",
        "Industrial digital twins across partners like PTC and Siemens",
      ],
      challenges: [
        "Industrial capex cycles",
      ],
      color: "#F97316",
    },
    {
      id: "automotive",
      name: "Automotive & Robotics",
      fy2025Revenue: 2.4,
      fy2024Revenue: 1.8,
      growthRate: 0.25,
      operatingMargin: 0.2,
      percentOfTotal: 2,
      components: [
        { name: "Automotive revenue (FY26 run-rate)", revenue: 2.4, growthRate: 0.25 },
      ],
      growthDrivers: [
        "Drive Hyperion 10 platform and Uber Level 4-ready fleet targeting 100k vehicles",
        "Physical AI deployments with Foxconn, Toyota, TSMC leveraging IGX Thor",
      ],
      challenges: [
        "OEM program timing",
        "Regulatory approvals",
      ],
      color: "#0F172A",
    },
    {
      id: "oem-other",
      name: "OEM & Other",
      fy2025Revenue: 1.6,
      fy2024Revenue: 1.2,
      growthRate: 0.1,
      operatingMargin: 0.15,
      percentOfTotal: 1,
      components: [
        { name: "OEM & Other revenue (FY26 run-rate)", revenue: 1.6, growthRate: 0.08 },
      ],
      growthDrivers: [
        "BlueField-4 launch as AI factory control plane",
        "RTX AI PC reference designs broadening OEM attach",
      ],
      challenges: [
        "Legacy cyclicality",
      ],
      color: "#9333EA",
    },
  ],
  baseCaseDCF: {
    projections,
    wacc: 0.08,
    terminalGrowth: 0.03,
    terminalValue: 5000,
    pvTerminalValue: 3000,
    enterpriseValue: 5000,
    cash: 60.6,
    debt: 8.5,
    equityValue: 5052.1,
    sharesOutstanding: 24.5,
    fairValuePerShare: 206.2,
  },
  marketData: {
    currentPrice: 184,
    marketCap: 4500,
    sharesOutstanding: 24.5,
    dateUpdated: "2025-11-19",
  },
  recommendation: {
    rating: "OUTPERFORM",
    targetPrice: 240,
    upside: 0.30,
    suggestedEntry: [200, 230],
    catalysts: {
      positive: [
        "Q4 FY26 guide $65B validates sustained demand",
        "Anthropic/OpenAI partnerships deepen CUDA moat",
        "Rubin CPX + NVLink Fusion open new workloads",
      ],
      negative: [
        "Further US export controls or supply constraints",
        "Power/land bottlenecks slow AI factory builds",
        "Customer ASIC efforts reduce wallet share",
      ],
    },
  },
  scenarios: {
    bull: {
      fairValue: 320,
      metrics: [
        { label: "Data center CAGR", value: "24%" },
        { label: "Gross margin", value: "77%" },
        { label: "Networking revenue", value: "$38B" },
        { label: "Terminal growth", value: "2.9%" },
      ],
      narrative:
        "Demand stays far ahead of supply as Blackwell/Rubin plus networking and software attach compound AI infrastructure economics.",
    },
    base: {
      fairValue: 234,
      metrics: [
        { label: "Data center CAGR", value: "18%" },
        { label: "Gross margin", value: "73%" },
        { label: "FCF margin", value: "35%" },
        { label: "Terminal growth", value: "2.4%" },
      ],
      narrative:
        "GPU + networking share remains dominant, but valuations already embed the virtuous AI cycle and mid-70s margins.",
    },
    bear: {
      fairValue: 150,
      metrics: [
        { label: "Data center CAGR", value: "8%" },
        { label: "Gross margin", value: "64%" },
        { label: "Export limitation impact", value: "$25B" },
        { label: "Terminal growth", value: "1.5%" },
      ],
      narrative:
        "Export controls, ASIC encroachment, and power limits slow hyperscale spend, compressing multiples despite leadership.",
    },
  },
  transcriptInsights: nvdaTranscriptInsights,
  theme: {
    iconLetter: "N",
    primaryColor: "#16A34A",
    accentColor: "#0F172A",
    segmentColors: {
      "data-center": "#16A34A",
      gaming: "#2563EB",
      "pro-viz": "#F97316",
      automotive: "#0F172A",
      "oem-other": "#9333EA",
    },
  },
};

