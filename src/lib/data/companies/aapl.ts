import { CompanyModel, YearProjection } from "@/types";
import { transcriptInsights as aaplTranscriptInsights } from "@/lib/data/transcripts/aapl-transcript-data";

const projections: YearProjection[] = [
  {
    year: 2026,
    segmentRevenue: {
      iphone: 228,
      services: 134,
      mac: 44,
      ipad: 33,
      wearables: 38,
    },
    totalRevenue: 477,
    fcfMargin: 0.29,
    fcf: 138.3,
    discountFactor: 0.922,
    presentValue: 127.6,
  },
  {
    year: 2027,
    segmentRevenue: {
      iphone: 242,
      services: 149,
      mac: 46,
      ipad: 34,
      wearables: 41,
    },
    totalRevenue: 512,
    fcfMargin: 0.292,
    fcf: 149.5,
    discountFactor: 0.85,
    presentValue: 127.1,
  },
  {
    year: 2028,
    segmentRevenue: {
      iphone: 256,
      services: 165,
      mac: 49,
      ipad: 36,
      wearables: 44,
    },
    totalRevenue: 550,
    fcfMargin: 0.295,
    fcf: 162.3,
    discountFactor: 0.784,
    presentValue: 127.2,
  },
  {
    year: 2029,
    segmentRevenue: {
      iphone: 268,
      services: 181,
      mac: 52,
      ipad: 37,
      wearables: 47,
    },
    totalRevenue: 585,
    fcfMargin: 0.298,
    fcf: 174.3,
    discountFactor: 0.722,
    presentValue: 125.8,
  },
  {
    year: 2030,
    segmentRevenue: {
      iphone: 280,
      services: 198,
      mac: 55,
      ipad: 39,
      wearables: 51,
    },
    totalRevenue: 623,
    fcfMargin: 0.3,
    fcf: 186.9,
    discountFactor: 0.665,
    presentValue: 124.4,
  },
  {
    year: 2031,
    segmentRevenue: {
      iphone: 292,
      services: 216,
      mac: 58,
      ipad: 40,
      wearables: 54,
    },
    totalRevenue: 660,
    fcfMargin: 0.302,
    fcf: 199.3,
    discountFactor: 0.613,
    presentValue: 122.1,
  },
  {
    year: 2032,
    segmentRevenue: {
      iphone: 305,
      services: 236,
      mac: 61,
      ipad: 42,
      wearables: 58,
    },
    totalRevenue: 702,
    fcfMargin: 0.305,
    fcf: 214.1,
    discountFactor: 0.565,
    presentValue: 120.9,
  },
  {
    year: 2033,
    segmentRevenue: {
      iphone: 318,
      services: 257,
      mac: 64,
      ipad: 44,
      wearables: 62,
    },
    totalRevenue: 745,
    fcfMargin: 0.307,
    fcf: 228.7,
    discountFactor: 0.521,
    presentValue: 119.2,
  },
  {
    year: 2034,
    segmentRevenue: {
      iphone: 332,
      services: 279,
      mac: 68,
      ipad: 46,
      wearables: 66,
    },
    totalRevenue: 791,
    fcfMargin: 0.31,
    fcf: 245.2,
    discountFactor: 0.48,
    presentValue: 117.7,
  },
  {
    year: 2035,
    segmentRevenue: {
      iphone: 346,
      services: 303,
      mac: 72,
      ipad: 48,
      wearables: 70,
    },
    totalRevenue: 839,
    fcfMargin: 0.31,
    fcf: 260.1,
    discountFactor: 0.442,
    presentValue: 115,
  },
];

export const aaplCompany: CompanyModel = {
  symbol: "AAPL",
  name: "Apple Inc.",
  description: "Ecosystem-driven hardware and services platform delivering record FY25 revenue ($416B) with iPhone and Services both hitting September-quarter highs.",
  segments: [
    {
      id: "iphone",
      name: "iPhone",
      fy2025Revenue: 215,
      fy2024Revenue: 200,
      growthRate: 0.075,
      operatingMargin: 0.46,
      percentOfTotal: 52,
      components: [
        { name: "Pro/Max flagships", revenue: 120, growthRate: 0.08 },
        { name: "Mainline iPhone", revenue: 55, growthRate: 0.04 },
        { name: "Emerging markets", revenue: 25, growthRate: 0.12 },
        { name: "Financed upgrades", revenue: 15, growthRate: 0.15 },
      ],
      growthDrivers: [
        "AI-enhanced camera stack and silicon",
        "Carrier financing and trade-in programs",
        "India/Brazil penetration",
        "Enterprise device management",
      ],
      challenges: [
        "Smartphone maturity",
        "China regulatory scrutiny",
        "Premium mix dependency",
      ],
      color: "#1D4ED8",
    },
    {
      id: "services",
      name: "Services",
      fy2025Revenue: 120,
      fy2024Revenue: 108,
      growthRate: 0.11,
      operatingMargin: 0.7,
      percentOfTotal: 27,
      components: [
        { name: "Subscriptions", revenue: 55, growthRate: 0.12 },
        { name: "App Store & Ads", revenue: 35, growthRate: 0.13 },
        { name: "AppleCare", revenue: 15, growthRate: 0.08 },
        { name: "Payments/Other", revenue: 15, growthRate: 0.1 },
      ],
      growthDrivers: [
        "Installed base of 2.2B active devices",
        "Search ads/App Store monetization",
        "Bundled services (One, AppleCare+)",
        "Financial services stack",
      ],
      challenges: [
        "App Store regulation",
        "Gross margin concentration",
        "Content investment requirements",
      ],
      color: "#F97316",
    },
    {
      id: "mac",
      name: "Mac",
      fy2025Revenue: 42,
      fy2024Revenue: 38,
      growthRate: 0.1,
      operatingMargin: 0.34,
      percentOfTotal: 9,
      components: [
        { name: "MacBook Pro", revenue: 24, growthRate: 0.11 },
        { name: "MacBook Air", revenue: 10, growthRate: 0.09 },
        { name: "Desktop", revenue: 8, growthRate: 0.05 },
      ],
      growthDrivers: [
        "Apple silicon upgrades",
        "Developer/AI workflows",
        "Enterprise fleet conversions",
      ],
      challenges: [
        "PC market cyclicality",
        "Higher ASP sensitivity",
        "Enterprise procurement cycles",
      ],
      color: "#0EA5E9",
    },
    {
      id: "ipad",
      name: "iPad",
      fy2025Revenue: 32,
      fy2024Revenue: 30,
      growthRate: 0.07,
      operatingMargin: 0.3,
      percentOfTotal: 7,
      components: [
        { name: "iPad Pro", revenue: 14, growthRate: 0.08 },
        { name: "iPad Air", revenue: 10, growthRate: 0.06 },
        { name: "Education/Enterprise", revenue: 8, growthRate: 0.07 },
      ],
      growthDrivers: [
        "OLED + Apple Pencil upgrades",
        "Education deployments",
        "Retail + field service workflows",
      ],
      challenges: [
        "Long replacement cycles",
        "Android price competition",
      ],
      color: "#22C55E",
    },
    {
      id: "wearables",
      name: "Wearables, Home & Accessories",
      fy2025Revenue: 36,
      fy2024Revenue: 34,
      growthRate: 0.06,
      operatingMargin: 0.32,
      percentOfTotal: 5,
      components: [
        { name: "Apple Watch", revenue: 18, growthRate: 0.07 },
        { name: "AirPods", revenue: 10, growthRate: 0.05 },
        { name: "Vision/Other", revenue: 8, growthRate: 0.15 },
      ],
      growthDrivers: [
        "Health and wellness features",
        "Spatial computing accessories",
        "Replacement cycle for AirPods",
      ],
      challenges: [
        "Price-sensitive demand",
        "Hardware margin pressure",
      ],
      color: "#A855F7",
    },
  ],
  baseCaseDCF: {
    projections,
    wacc: 0.085,
    terminalGrowth: 0.032,
    terminalValue: 5050,
    pvTerminalValue: 2231,
    enterpriseValue: 3457,
    cash: 170,
    debt: 120,
    equityValue: 3507,
    sharesOutstanding: 15.6,
    fairValuePerShare: 225,
  },
  marketData: {
    currentPrice: 235,
    marketCap: 3660,
    sharesOutstanding: 15.6,
    dateUpdated: "2025-10-30",
  },
  recommendation: {
    rating: "BUY",
    targetPrice: 260,
    upside: 0.11,
    suggestedEntry: [210, 225],
    catalysts: {
      positive: [
        "Services ARPU expansion",
        "Vision/AI spatial computing tailwinds",
        "Record FY25 execution (Q4 revenue $102.5B) sustaining confidence",
        "Accelerated buybacks",
        "Install base monetization",
      ],
      negative: [
        "Greater China demand softness",
        "Regulatory action on App Store",
        "Supply-chain/geopolitical shocks",
      ],
    },
  },
  scenarios: {
    bull: {
      fairValue: 285,
      metrics: [
        { label: "Services CAGR", value: "12%" },
        { label: "Gross margin", value: "47%" },
        { label: "Vision Pro units", value: "2.5M" },
        { label: "Terminal growth", value: "3.5%" },
      ],
      narrative: "Premium mix plus high-margin services push earnings power higher with Vision Pro adoption.",
    },
    base: {
      fairValue: 225,
      metrics: [
        { label: "Services CAGR", value: "10%" },
        { label: "Gross margin", value: "45%" },
        { label: "Buyback cadence", value: "$90B/yr" },
        { label: "Terminal growth", value: "3.2%" },
      ],
      narrative: "Steady hardware refresh cycles and services mix shift sustain mid-single-digit EPS growth.",
    },
    bear: {
      fairValue: 185,
      metrics: [
        { label: "Services CAGR", value: "7%" },
        { label: "Gross margin", value: "42%" },
        { label: "China revenue", value: "-5%" },
        { label: "Terminal growth", value: "2.8%" },
      ],
      narrative: "China softness and regulatory friction compress both growth and multiples.",
    },
  },
  transcriptInsights: aaplTranscriptInsights,
  theme: {
    iconLetter: "A",
    primaryColor: "#111827",
    accentColor: "#F97316",
    segmentColors: {
      iphone: "#1D4ED8",
      services: "#F97316",
      mac: "#0EA5E9",
      ipad: "#22C55E",
      wearables: "#A855F7",
    },
  },
};
